---
description: 06/04/2024
cover: https://miro.medium.com/v2/resize:fit:1400/0*8g1I6QQtgT0qbu3T.jpg
coverY: 0
---

# ðŸ¤™ Remote Debugging, gdb-multiarch, and More!

## Introduction

This will be a quick little write up for anyone interested in debugging and exploiting programs that are compiled for one CPU architecture while you are running on another.

This setup should work on every setup, if it doesn't please contact me so I can update this write up.&#x20;

> :rotating\_light: I'm currently on an M3 Mac to present this to you!

## Introducing our Target

Like any other target in the world of hacking, we need to do some recon.

<figure><img src="../.gitbook/assets/image (5) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption><p>Running <code>file</code> against our target binary</p></figcaption></figure>

Even though we are on an ARM-based Mac, this ARM executable is not compatible with AARCH64. Which means we will need some help from `qemu` to emulate the binary under those specific ISA's.

We can see when we try to normally execute the binary, it will fail. However, when we use `qemu`, it will succeed due to the magic of emulation!

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption><p>Illustrating fail and success</p></figcaption></figure>

## Remote Debugging

In order to debug this program, we will need to first use `qemu` to host the process on a socket and then use `gdb-multiarch` to "remotely" connect to the socket.

**Running the program:**

```
qemu-arm -g <arbitrary_port_here> <./target_program_here>
```

You will see that this process will hang and not seem to be doing anything. However, the real magic happens the second we introduce `gdb-multiarch`!

Running `gdb-multiarch`:

```
gdb-multiarch <./target_program_here>
```

Once inside `gdb-multiarch`, connect to the remote process:

```
target remote localhost:<arbitrary_port_here>
```

<figure><img src="../.gitbook/assets/image (3) (1) (1) (1) (1) (1) (1) (1) (1) (1) (1).png" alt=""><figcaption><p>Inside of <code>gdb-multiarch</code> and debugging a remote process that's being emulated via <code>qemu</code></p></figcaption></figure>
